<div class="container-fluid ">
    <div class="row" ng-init="mostrarCadastrar=true; mostrarAtualizar=false;">
        <!-- FormulÃ¡rio -->
        <div ng-controller="boletim"
            class="col-md-6 mx-auto mt-4 rounded bg-light border-dark border">
            <h5 class="my-3">Gerar boletim</h5>
            <div class="form">
                <form name="form" id="formNota" novalidate ng-class="{'submitted': submitted}"
                    ng-submit="submitted=true;">
                    <div class="form-row">

                        <!-- Turma -->
                        <div class="form-group col-md-6">
                            <label for="turma" class="ml-1">Turma</label>
                            <div id="turma" class="bg-white rounded input-group mb-2" title="Pesquisar..."
                                ng-init="listarTurmas()">
                                <select required ng-model="turma"
                                    ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"
                                    class="form-control" id="turma" name="turma" aria-describedby="erro"
                                    ng-change="listarAlunos(turma.alunoList)">
                                    <option ng-repeat="turma in turmas" ng-value="{{turma}}">
                                        {{turma.codigo}}
                                    </option>
                                </select>
                            </div>
                        </div>

                        <!-- Bimestre -->
                        <div class="form-group col-md-6" ng-init="listarBimestres()">
                            <label for="bimestre" class="ml-1">Bimestre</label>
                            <select required ng-model="bimestre"
                                ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"
                                class="form-control" id="bimestre" name="bimestre" aria-describedby="erro">
                                <option ng-repeat="bimestre in bimestres" ng-value="{{bimestre}}">
                                    {{bimestre.bimestre}}
                                </option>
                            </select>
                            <small id="erro" class="text-white bg-danger"
                                ng-show="form.bimestre.$error.minlength">Informe
                                um
                                bimestre.</small>
                        </div>
                    </div>

                    <!-- Aluno -->
                    <div class="form-group mb-4">
                        <label for="aluno" class="ml-1">Aluno</label>
                        <select required ng-model="aluno"
                            ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"
                            class="form-control" id="aluno" name="aluno" aria-describedby="erro">
                            <option ng-repeat="aluno in alunos" ng-value="{{aluno}}">
                                {{aluno.nome + ' ' + aluno.sobrenome}}
                            </option>
                        </select>
                    </div>

                    <!-- Cadastrar -->
                    <button class="btn btn-secondary w-100 mb-3" ng-if="mostrarCadastrar"
                        ng-click="gerar(aluno.id, bimestre.id)" type="submit">Gerar</button>

                    <!-- Atualizar -->
                    <div class="form-row" ng-if="mostrarAtualizar">
                        <div class="form-group col-md-10">
                            <button class="btn btn-secondary w-100" ng-click="submitted=true; atualizar(nota);"
                                type="submit">Gerar outro boletim</button>
                        </div>
                        <div class="form-group col-md-1">
                            <button title="Baixar boletim" class="btn btn-info w-100" ng-click="cancelarAtualizar()">
                               <img src="app\imgs\file.svg" alt="Baixar boletim" width="20">
                            </button>
                        </div>
                        <div class="form-group col-md-1">
                            <button title="Imprimir boletim" class="btn btn-info w-100" ng-click="cancelarAtualizar()">
                                <img src="app\imgs\printer.svg" alt="Imprimir boletim" width="20">
                            </button>
                        </div>
                    </div>
                </form>
            </div class="form">
        </div>
    </div>
</div>